import {
  Box,
  Button,
  Link,
  Typography,
  useMediaQuery,
  useTheme,
} from "@mui/material";
import Image from "next/image";
import Grid from "@mui/material/Unstable_Grid2";

import { motion } from "framer-motion";
import type { NextPage } from "next";
import type { CarouselItem, Value } from "../utils/types";
import Head from "next/head";
import { useRef } from "react";
import { fadeInUp } from "../animations/constants";
import gruppbild from "../assets/gruppbild.jpg";
import BackgroundImage from "../components/general/BackgroundImage";
import jsonValues from "../content/values.json";
import MtValues from "../components/home/mtValues";
import WavyBackground from "../components/general/WavyBackground";
import Carousel from "../components/general/Carousel";
import carouselImages from "../content/carouselItems.json";

const Home: NextPage = () => {
  const theme = useTheme();

  const constraintsRef1 = useRef(null);
  const constraintsRef2 = useRef(null);
  const constraintsRef3 = useRef(null);
  const constraintsRef4 = useRef(null);

  const matchesSm = useMediaQuery(theme.breakpoints.down("md"));
  const notSm = useMediaQuery(theme.breakpoints.not("sm"));

  const values: Value[] = jsonValues;
  const carouselItems: CarouselItem[] = carouselImages;

  return (
    <motion.div
      // style={{
      //   backgroundImage: `url(${gruppbild.src})`,
      //   backgroundSize: "cover",
      // }}
      animate="animate"
      initial="initial"
      style={{ overflow: "hidden", background: "white" }}
    >
      <Head>
        <title>Civilingenjör i Medieteknik</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      {/* <video autoPlay loop muted id="video">
        <source
          src={require(`../assets/introVideo.mp4`).default.src}
          type="video/mp4"
        />
      </video> */}
      <BackgroundImage imgSrc={gruppbild.src}>
        {
          //TODO: This grid should cover entire page and contian all child grids
        }
        <Grid
          display="flex"
          flexDirection="column"
          alignItems="center"
          justifyContent="center"
          sx={{ width: "100%", height: "80vh", zIndex: 100 }}
        >
          <Grid
            container
            display="flex"
            alignItems="center"
            justifyContent="center"
          >
            <motion.div ref={constraintsRef1} variants={fadeInUp}>
              <motion.div
                drag
                dragConstraints={constraintsRef1}
                style={{
                  backgroundColor: "#EC6610",
                  width: "150px",
                  height: "150px",
                }}
              />
            </motion.div>
            <div style={{ margin: "20px" }}></div>
            <motion.div ref={constraintsRef2}>
              <motion.div
                drag
                dragConstraints={constraintsRef2}
                style={{
                  backgroundColor: "#3b484f",
                  width: "150px",
                  height: "150px",
                }}
              />
            </motion.div>
          </Grid>
          <div style={{ margin: "10px" }}></div>
          <motion.div ref={constraintsRef3}>
            <motion.div
              drag
              dragConstraints={constraintsRef3}
              style={{
                fontFamily: "Lato",
                fontSize: "45px",
              }}
            >
              CIVILINGENJÖR
            </motion.div>
          </motion.div>
          <motion.div ref={constraintsRef4}>
            <motion.div
              drag
              dragConstraints={constraintsRef4}
              style={{
                fontFamily: "Barlow",
                fontWeight: "bold",
                fontSize: "64px",
              }}
            >
              MEDIETEKNIK
            </motion.div>
          </motion.div>
        </Grid>
      </BackgroundImage>
      <Grid
        container
        spacing={2}
        paddingLeft={{ xs: 3, lg: 15 }}
        paddingRight={{ xs: 3, lg: 15 }}
      >
        <Grid xs={12}>
          <Typography
            paddingTop={5}
            color="black"
            variant="h2"
            textAlign="center"
          >
            Vad är MT?
          </Typography>
          <Typography color="black" textAlign="center">
            Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do
            eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim
            ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut
            aliquip ex ea commodo consequat.
          </Typography>
        </Grid>
      </Grid>
      <Grid
        container
        padding={5}
        alignItems={"center"}
        paddingLeft={{ xs: 3, lg: 15 }}
        paddingRight={{ xs: 3, lg: 15 }}
        spacing={6}
        columns={{ xs: 4, sm: 8, md: 12 }}
      >
        {values.map((value, index) => {
          if (notSm) {
            return (
              <Grid
                xs={4}
                sm={4}
                md={4}
                key={index}
                alignItems="center"
                justifyContent="center"
              >
                {/* TODO: center last item when screen is smaller*/}
                <MtValues
                  description={value.description}
                  title={value.title}
                  image={value.image}
                />
              </Grid>
            );
          } else {
            if (index !== values.length - 1) {
              return (
                <Grid
                  xs={4}
                  sm={4}
                  md={4}
                  key={index}
                  alignItems="center"
                  justifyContent="center"
                >
                  {/* TODO: center last item when screen is smaller*/}
                  <MtValues
                    description={value.description}
                    title={value.title}
                    image={value.image}
                  />
                </Grid>
              );
            } else {
              return (
                <Grid
                  sm={8}
                  key={index}
                  alignItems="center"
                  justifyContent="center"
                  paddingRight={23}
                  paddingLeft={23}
                >
                  {/* TODO: center last item when screen is smaller*/}
                  <MtValues
                    description={value.description}
                    title={value.title}
                    image={value.image}
                  />
                </Grid>
              );
            }
          }
        })}
      </Grid>
      <Grid container paddingTop={9} paddingBottom={9}>
        {matchesSm ? (
          <Grid
            md={9}
            paddingLeft={{ xs: 3, lg: 15 }}
            paddingRight={{ xs: 3, lg: 15 }}
            display="flex"
            flexDirection="column"
            alignItems="center"
          >
            <Typography textAlign="center" variant="h2">
              Studentliv
            </Typography>
            <Image
              style={{ flex: 1 }}
              width={511 * 0.5}
              height={658 * 0.5}
              src={"/images/studentlivImage.png"}
              alt="Bild på studenter"
            />
            <Typography marginTop={3} textAlign="center">
              Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do
              eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut
              enim ad minim veniam, quis nostrud exercitation ullamco laboris
              nisi ut aliquip ex ea commodo consequat. Lorem ipsum dolor sit
              amet, consectetur adipiscing elit, sed do eiusmod tempor
              incididunt ut labore et dolore magna aliqua. Ut enim ad minim
              veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip
              ex ea commodo consequat. Lorem ipsum dolor sit amet, consectetur
              adipiscing elit, sed do eiusmod tempor incididunt ut labore et
              dolore magna aliqua. Ut enim ad minim veniam, quis nostrud
              exercitation ullamco laboris nisi ut aliquip ex ea commodo
              consequat.
            </Typography>
            <Button
              variant="contained"
              color={"secondary"}
              component={"a"}
              LinkComponent={Link}
              href="/studentliv"
              sx={{ marginTop: 3 }}
            >
              Läs mer här
            </Button>
          </Grid>
        ) : (
          <>
            <Grid
              md={9}
              paddingLeft={{ md: 8, lg: 15 }}
              display="flex"
              flexDirection="column"
              alignItems="center"
            >
              <Typography textAlign="center" variant="h2">
                Studentliv
              </Typography>
              <Typography textAlign="center">
                Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do
                eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut
                enim ad minim veniam, quis nostrud exercitation ullamco laboris
                nisi ut aliquip ex ea commodo consequat. Lorem ipsum dolor sit
                amet, consectetur adipiscing elit, sed do eiusmod tempor
                incididunt ut labore et dolore magna aliqua. Ut enim ad minim
                veniam, quis nostrud exercitation ullamco laboris nisi ut
                aliquip ex ea commodo consequat. Lorem ipsum dolor sit amet,
                consectetur adipiscing elit, sed do eiusmod tempor incididunt ut
                labore et dolore magna aliqua. Ut enim ad minim veniam, quis
                nostrud exercitation ullamco laboris nisi ut aliquip ex ea
                commodo consequat.
              </Typography>
              <Button
                variant="contained"
                color={"secondary"}
                component={"a"}
                LinkComponent={Link}
                href="/studentliv"
                sx={{ marginTop: 3 }}
              >
                Läs mer här
              </Button>
            </Grid>
            <Grid
              md={3}
              display="flex"
              justifyContent="flex-end"
              alignItems="center"
            >
              <Box
                position="relative"
                width={{ sm: 511 * 0.3, md: 511 * 0.4, lg: 511 * 0.5 }}
                height={{ sm: 658 * 0.3, md: 658 * 0.4, lg: 658 * 0.5 }}
              >
                <Image
                  layout="fill"
                  src={"/images/studentlivImage.png"}
                  alt="Bild på studenter"
                />
              </Box>
            </Grid>
          </>
        )}
      </Grid>
      <Grid md={12} display="flex" justifyContent="center">
        <WavyBackground bgColor={"#008081"} textColor={""}>
          <Carousel carouselItems={carouselItems} />
        </WavyBackground>
      </Grid>
      <Grid container paddingTop={9} paddingBottom={9}>
        {matchesSm ? (
          <Grid
            md={9}
            paddingLeft={{ xs: 3, lg: 15 }}
            paddingRight={{ xs: 3, lg: 15 }}
            display="flex"
            flexDirection="column"
            alignItems="center"
          >
            <Typography textAlign="center" variant="h2">
              Medieteknikdagen
            </Typography>
            <Image
              style={{ flex: 1 }}
              width={511 * 0.5}
              height={658 * 0.5}
              src={"/images/studentlivImage2.png"}
              alt="Bild på studenter"
            />
            <Typography marginTop={3} textAlign="center">
              Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do
              eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut
              enim ad minim veniam, quis nostrud exercitation ullamco laboris
              nisi ut aliquip ex ea commodo consequat. Lorem ipsum dolor sit
              amet, consectetur adipiscing elit, sed do eiusmod tempor
              incididunt ut labore et dolore magna aliqua. Ut enim ad minim
              veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip
              ex ea commodo consequat. Lorem ipsum dolor sit amet, consectetur
              adipiscing elit, sed do eiusmod tempor incididunt ut labore et
              dolore magna aliqua. Ut enim ad minim veniam, quis nostrud
              exercitation ullamco laboris nisi ut aliquip ex ea commodo
              consequat.
            </Typography>
            <Button
              variant="contained"
              component={"a"}
              LinkComponent={Link}
              href="https://www.medieteknikdagen.se/"
              color={"secondary"}
              sx={{ marginTop: 3 }}
            >
              Läs mer här
            </Button>
          </Grid>
        ) : (
          <>
            <Grid
              md={3}
              spacing={6}
              display="flex"
              justifyContent="flex-start"
              alignItems="center"
            >
              <Box
                position="relative"
                width={{ sm: 511 * 0.3, md: 511 * 0.4, lg: 511 * 0.5 }}
                height={{ sm: 658 * 0.3, md: 658 * 0.4, lg: 658 * 0.5 }}
              >
                <Image
                  layout="fill"
                  src={"/images/studentlivImage2.png"}
                  alt="Bild på studenter"
                />
              </Box>
            </Grid>
            <Grid
              md={9}
              paddingRight={{ md: 8, lg: 15 }}
              display="flex"
              flexDirection="column"
              alignItems="center"
            >
              <Typography textAlign="center" variant="h2">
                Medieteknikdagen
              </Typography>
              <Typography textAlign="center">
                Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do
                eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut
                enim ad minim veniam, quis nostrud exercitation ullamco laboris
                nisi ut aliquip ex ea commodo consequat. Lorem ipsum dolor sit
                amet, consectetur adipiscing elit, sed do eiusmod tempor
                incididunt ut labore et dolore magna aliqua. Ut enim ad minim
                veniam, quis nostrud exercitation ullamco laboris nisi ut
                aliquip ex ea commodo consequat. Lorem ipsum dolor sit amet,
                consectetur adipiscing elit, sed do eiusmod tempor incididunt ut
                labore et dolore magna aliqua. Ut enim ad minim veniam, quis
                nostrud exercitation ullamco laboris nisi ut aliquip ex ea
                commodo consequat.
              </Typography>
              <Button
                variant="contained"
                component={"a"}
                LinkComponent={Link}
                href="https://www.medieteknikdagen.se/"
                color={"secondary"}
                sx={{ marginTop: 3 }}
              >
                Läs mer här
              </Button>
            </Grid>
          </>
        )}
      </Grid>
    </motion.div>
  );
};

export default Home;
